<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projects Portal | IRADA Innovation Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Montserrat:wght@800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
	

.flash-container {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    pointer-events: none;
    z-index: 1000;
    padding: 20px;
}

.flash-message {
    max-width: 500px;
    width: 100%;
    padding: 20px 25px;
    margin: 10px 0;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    display: flex;
    align-items: center;
    transform: translateY(20px);
    opacity: 0;
    animation: flashEnter 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.1);
}

.flash-content {
    display: flex;
    align-items: center;
    width: 100%;
}

.flash-icon {
    width: 24px;
    height: 24px;
    margin-right: 15px;
    flex-shrink: 0;
}

.flash-text {
    font-size: 1rem;
    line-height: 1.5;
    font-weight: 500;
}

/* Color Variants */
.flash-success {
    background: rgba(46, 125, 50, 0.9);
    color: white;
    border-left: 4px solid #81C784;
}

.flash-error {
    background: rgba(198, 40, 40, 0.9);
    color: white;
    border-left: 4px solid #EF9A9A;
}

.flash-warning {
    background: rgba(237, 108, 2, 0.9);
    color: white;
    border-left: 4px solid #FFCC80;
}

.flash-info {
    background: rgba(30, 136, 229, 0.9);
    color: white;
    border-left: 4px solid #90CAF9;
}

/* Animations */
@keyframes flashEnter {
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes flashExit {
    to {
        transform: translateY(-20px);
        opacity: 0;
    }
}

/* Auto-dismiss animation */
.flash-message {
    animation: flashEnter 0.4s forwards, flashExit 0.4s forwards 4s;
}
#submit select.form-control {
    color: black !important;
    background-color: white;
}

.proposals-table-container {
    overflow-x: auto;
    margin-top: 30px;
}

.proposals-table {
    width: 100%;
    border-collapse: collapse;
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.proposals-table th {
    background: rgba(37, 99, 235, 0.2);
    color: white;
    font-weight: 600;
    padding: 15px;
    text-align: left;
}

.proposals-table td {
    padding: 12px 15px;
    color: rgba(255, 255, 255, 0.9);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.proposals-table tr:last-child td {
    border-bottom: none;
}

.proposals-table tr:hover {
    background: rgba(255, 255, 255, 0.03);
}

.status-badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 50px;
    font-size: 0.8rem;
    font-weight: 600;
}

.status-pending {
    background: rgba(255, 193, 7, 0.2);
    color: #ffc107;
}

.status-accepted {
    background: rgba(40, 167, 69, 0.2);
    color: #28a745;
}

.status-rejected {
    background: rgba(220, 53, 69, 0.2);
    color: #dc3545;
}

.view-btn {
    padding: 6px 12px;
    background: rgba(37, 99, 235, 0.2);
    color: var(--primary);
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.85rem;
}

.view-btn:hover {
    background: rgba(37, 99, 235, 0.4);
}

.edit-btn {
    padding: 6px 12px;
    background: rgba(255, 193, 7, 0.2);
    color: #ffc107;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.85rem;
    margin-left: 5px;
}

.edit-btn:hover {
    background: rgba(255, 193, 7, 0.4);
}
        .projects-container {
            position: relative;
            z-index: 10;
            padding: 80px 5%;
            color: white;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Hero Section */
        .projects-hero {
            text-align: center;
            margin-bottom: 60px;
        }

        .projects-hero h1 {
            font-size: clamp(2rem, 6vw, 4rem);
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            background: linear-gradient(to right, white, var(--gray));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .projects-hero h1 span {
            background: linear-gradient(to right, var(--secondary), #fbbf24);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .projects-hero p {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
            max-width: 700px;
            margin: 0 auto 2rem;
        }

        /* Tabs Navigation */
        .projects-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tab-btn {
            padding: 12px 30px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
        }

        .tab-btn::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        .tab-btn.active {
            color: white;
        }

        .tab-btn.active::after {
            width: 100%;
        }

        .tab-btn:hover {
            color: white;
        }
.tab-btn[data-tab="login-required"] {
    color: rgba(255, 255, 255, 0.5);
    cursor: not-allowed;
}

.tab-btn[data-tab="login-required"]:hover {
    color: rgba(255, 255, 255, 0.7);
}

.tab-btn[data-tab="login-required"]::after {
    display: none;
}
        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        /* Projects Grid */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .project-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .project-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .project-domain {
            display: inline-block;
            padding: 4px 12px;
            background: rgba(37, 99, 235, 0.2);
            color: var(--primary);
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .project-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: white;
        }

        .project-abstract {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .project-meta {
            display: flex;
            flex-direction: column;
            gap: 10px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .project-meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .project-meta-item svg {
            width: 16px;
            height: 16px;
            fill: var(--secondary);
        }
		#completed .project-card {
			display: block;
		}
        /* Filters */
        .filters {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .filter-group {
            position: relative;
        }

        .filter-label {
            position: absolute;
            top: -10px;
            left: 15px;
            background: var(--dark);
            padding: 0 8px;
            font-size: 0.8rem;
            color: var(--gray));
        }

        .filter-select {
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.59);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #000;
            min-width: 180px;
        }

        /* Completed Projects Specific */
        .project-links {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .project-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: white;
            text-decoration: none;
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }

        .project-link:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .project-link svg {
            width: 14px;
            height: 14px;
            fill: currentColor;
        }

        /* Submission Form */
        .submission-form {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 800px;
            margin: 0 auto;
        }

        .form-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .form-header h2 {
            margin: 0;
            font-size: 1.8rem;
            color: white;
        }

        .user-info {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        .user-info a {
            color: var(--primary);
            text-decoration: none;
            margin-left: 10px;
        }

        .user-info a:hover {
            text-decoration: underline;
        }

        .download-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: var(--secondary);
            color: var(--dark);
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
            text-decoration: none;
        }

        .download-btn:hover {
            background: #fbbf24;
            transform: translateY(-2px);
        }

        .download-btn svg {
            width: 16px;
            height: 16px;
            fill: currentColor;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: white;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-family: 'Poppins', sans-serif;
        }


        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

input.form-control,
textarea.form-control,
select.form-control {
    background: rgba(255, 255, 255, 0.1) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    color: white !important;
    font-family: 'Poppins', sans-serif !important;
    border-radius: 8px !important;
    padding: 12px 15px !important;
    width: 100% !important;
}

textarea.form-control {
    min-height: 120px;
    resize: vertical;
}
        .form-row {
            display: flex;
            gap: 20px;
        }

        .form-row .form-group {
            flex: 1;
        }

        #team_members {
            margin-top: 15px;
        }

        #team_members input {
            margin-bottom: 10px;
            width: 100%;
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-family: 'Poppins', sans-serif;
        }

        .submit-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 30px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .submit-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
        }
		/* Form download button width */
    .download-btn {
        width: 100%;
        text-align: center;
        justify-content: center;
    }

    /* Form labels and text visibility */
    .form-label {
        color: white !important;
    }

    /* Input text color */
    .form-control {
        color: white !important;
    }

    /* Input placeholder color */
    .form-control::placeholder {
        color: rgba(255, 255, 255, 0.7) !important;
    }

    /* Submit button styles */
    .submit-btn {
        width: 100%;
        display: block;
        margin: 20px auto 0;
    }

    /* Filter functionality */
    .filter-select {
        cursor: pointer;
    }

    /* Project links functionality */
    .project-link {
        transition: all 0.3s ease;
    }
    .project-link:hover {
        background: var(--primary) !important;
    }

    /* Track project section */
    .track-project {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 40px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        max-width: 800px;
        margin: 40px auto;
        display: none;
    }

    .track-project.active {
        display: block;
    }

    .track-form {
        margin-top: 20px;
    }

    /* Status message styles */
    .status-message {
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
        text-align: center;
        display: none;
    }

    .status-message.success {
        background: rgba(40, 167, 69, 0.2);
        border: 1px solid rgba(40, 167, 69, 0.5);
        color: #28a745;
        display: block;
    }

    .status-message.error {
        background: rgba(220, 53, 69, 0.2);
        border: 1px solid rgba(220, 53, 69, 0.5);
        color: #dc3545;
        display: block;
    }
	.form-section {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 12px;
        padding: 25px;
        margin-bottom: 25px;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .form-section-title {
        font-size: 1.2rem;
        color: white;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .form-row {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
    }

    .form-group {
        flex: 1;
    }

    .form-control {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: white;
        border-radius: 8px;
        padding: 12px 15px;
        width: 100%;
        transition: all 0.3s ease;
    }

    .form-control:focus {
        border-color: #4CAF50;
        box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
    }

    .checkbox-label {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;
        color: white;
    }

    .checkbox-label input {
        width: 18px;
        height: 18px;
    }

    .resources-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 12px;
        margin-bottom: 20px;
    }

    .resource-option {
        background: rgba(255, 255, 255, 0.1);
        padding: 12px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
    }

    .resource-option:hover {
        background: rgba(255, 255, 255, 0.2);
    }

    .file-upload {
        border: 2px dashed rgba(255, 255, 255, 0.3);
        padding: 30px;
        text-align: center;
        border-radius: 8px;
        margin-top: 20px;
    }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .projects-container {
                padding: 60px 20px;
            }
            
            .projects-tabs {
                flex-wrap: wrap;
            }
            
            .tab-btn {
                padding: 10px 20px;
                font-size: 1rem;
            }
            
            .filters {
                flex-direction: column;
            }
            
            .filter-select {
                width: 100%;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .submission-form {
                padding: 30px 20px;
            }

            .form-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
			
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- Animated Background Particles -->
    <div id="particles-js"></div>
    
    <!-- Navigation -->
    <header class="navbar">
        <div class="container">
            <h1 class="logo">IRADA<span>INNOVATION</span>CENTRE</h1>
            <nav>
				<ul class="nav-links">
					<li><a href="{{ url_for('landing') }}" class="nav-link {% if request.endpoint == 'landing' %}active{% endif %}">Home</a></li>
					<li><a href="{{ url_for('about') }}" class="nav-link {% if request.endpoint == 'about' %}active{% endif %}">About</a></li>
					<li><a href="{{ url_for('projects') }}" class="nav-link {% if request.endpoint == 'projects' %}active{% endif %}">Projects Portal</a></li>
					<li><a href="{{ url_for('events') }}" class="nav-link {% if request.endpoint == 'events' %}active{% endif %}">Events & Training</a></li>
					<li><a href="{{ url_for('resource_hub') }}" class="nav-link {% if request.endpoint == 'resource_hub' %}active{% endif %}">Resource Hub</a></li>
					{% if 'user_id' in session %}
						<li><a href="{{ url_for('logout') }}" class="logout-btn">Logout</a></li>
					{% else %}
						<li><a href="{{ url_for('login') }}" class="nav-link {% if request.endpoint == 'login' %}active{% endif %}">Login</a></li>
						<li><a href="{{ url_for('signup') }}" class="signup-btn {% if request.endpoint == 'signup' %}active{% endif %}">Signup</a></li>
					{% endif %}
				</ul>
				<div class="hamburger">
					<span></span>
					<span></span>
					<span></span>
				</div>
			</nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="projects-container">
	
	
    
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-container">
                {% for category, message in messages %}
                    <div class="flash-message flash-{{ category }}">
                        <div class="flash-content">
                            <svg class="flash-icon" viewBox="0 0 24 24">
                                {% if category == 'success' %}
                                    <path fill="currentColor" d="M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z"/>
                                {% elif category == 'error' %}
                                    <path fill="currentColor" d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"/>
                                {% else %}
                                    <path fill="currentColor" d="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
                                {% endif %}
                            </svg>
                            <span class="flash-text">{{ message }}</span>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
    
   
        <!-- Hero Section -->
        <section class="projects-hero animate__animated animate__fadeIn">
            <h1>Projects <span>Portal</span></h1>
            <p>Explore ongoing and completed innovation projects at IRADA. Track progress, view deliverables, and submit your own projects.</p>
        </section>

        <!-- Tabs Navigation -->
        
		
		
		
		<div class="projects-tabs">
			<button class="tab-btn active" data-tab="ongoing">Ongoing Projects</button>
			<button class="tab-btn" data-tab="completed">Completed Projects</button>
			{% if logged_in %}
				<button class="tab-btn" data-tab="submit">Submit Your Proposal</button>
				<button class="tab-btn" data-tab="my-proposals">My Proposals</button>
			{% else %}
				<button class="tab-btn" data-tab="login-required" onclick="showLoginAlert()">Submit Your Proposal</button>
				<button class="tab-btn" data-tab="login-required" onclick="showLoginAlert()">My Proposals</button>
			{% endif %}
		</div>

        <!-- Ongoing Projects Tab -->
        <div class="tab-content active" id="ongoing">
    <div class="filters">
        <div class="filter-group">
            <span class="filter-label">Domain</span>
            <select class="filter-select" id="ongoing-domain">
                <option value="">All Domains</option>
                <option value="ai">AI & Machine Learning</option>
                <option value="robotics">Robotics & Automation</option>
                <option value="data">Data Science</option>
                <option value="aviation">Aviation Innovation</option>
            </select>
        </div>
        <div class="filter-group">
            <span class="filter-label">Timeline</span>
            <select class="filter-select" id="ongoing-timeline">
                <option value="">All Timelines</option>
                <option value="short">Short-term (0-3 months)</option>
                <option value="medium">Medium-term (3-6 months)</option>
                <option value="long">Long-term (6+ months)</option>
            </select>
        </div>
        <div class="filter-group">
            <span class="filter-label">Supervisor</span>
            <select class="filter-select" id="ongoing-supervisor">
                <option value="">All Supervisors</option>
				<option value="prof-hannah">Prof. Hannah Al Ali</option>
				<option value="dr-deepudev">Dr. Deepudev Sahadevan</option>
				<option value="dr-mostafa">Dr. Mostafa Kamil</option>
				<option value="dr-blessy">Dr. Blessy Trencia Lincy</option>
				<option value="dr-muner">Dr. Muner Mustafa Abou Hasan</option>
				<option value="dr-zaytoon">Dr. Mohammad Abu Zaytoon</option>
				<option value="dr-rfaat">Dr. Rfaat Soliby</option>
				<option value="dr-zainab">Dr. Zainab Rasheed</option>
				<option value="dr-rukshanda">Dr. Rukshanda Kamran</option>
				<option value="prof-alireza">Prof. Alireza Daneshkhah</option>
				<option value="mawada-nasser">Mawada Nasser</option>
				<option value="riham-arab">Riham Arab</option>
				<option value="dr-thomas">Dr. Thomas Mgonja</option>
				<option value="dr-yacob">Dr. Yacob TesFamariam Tesfaldet</option>
				<option value="dr-mahmoud">Dr. Mahmoud Alkhouli</option>
				<option value="dr-theo">Dr. Mojtaba Theo Ammari</option>
				<option value="dr-seyed">Dr. Seyed Mousavi</option>
				
                
            </select>
        </div>
        <button class="submit-btn" id="ongoing-search">Search</button>
    </div>

            <div class="projects-grid">
    {% for project in ongoing_projects %}
    <article class="project-card animate__animated animate__fadeInUp" style="animation-delay: {{ loop.index0 * 0.1 }}s">
        <span class="project-domain">{{ project.domain }}</span>
        <h3 class="project-title">{{ project.project_title }}</h3>
        <p class="project-abstract">{{ project.abstract }}</p>
        <div class="project-meta">
            <div class="project-meta-item">
                <svg viewBox="0 0 24 24">
                    <path d="M12 4a4 4 0 014 4 4 4 0 01-4 4 4 4 0 01-4-4 4 4 0 014-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4z"/>
                </svg>
                <span>Researcher: {{ project.researcher }}</span>
            </div>
            <div class="project-meta-item">
                <svg viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"/>
                </svg>
                <span>Supervisor: {{ project.supervisor }}</span>
            </div>
            <div class="project-meta-item">
                <svg viewBox="0 0 24 24">
                    <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/>
                </svg>
                <span>{{ project.timeline }}</span>
            </div>
        </div>
    </article>
    {% endfor %}
</div>
        </div>


		<!-- Completed Projects Tab -->
<div class="tab-content" id="completed">
    <div class="filters">
        <div class="filter-group">
            <span class="filter-label">Domain</span>
            <select class="filter-select" id="completed-domain">
                <option value="">All Domains</option>
                <option value="ai">AI & Machine Learning</option>
                <option value="robotics">Robotics & Automation</option>
                <option value="data">Data Science</option>
                <option value="aviation">Aviation Innovation</option>
            </select>
        </div>
        <div class="filter-group">
            <span class="filter-label">Completed Year</span>
            <select class="filter-select" id="completed-year">
                <option value="">All Years</option>
                <option value="2025">2025</option>
                <option value="2024">2024</option>
                <option value="2023">2023</option>
                <option value="2022">2022</option>
            </select>
        </div>
        <div class="filter-group">
			<span class="filter-label">Supervisor</span>
			<select class="filter-select" id="completed-supervisor">
				<option value="">All Supervisors</option>
				<option value="prof-hannah">Prof. Hannah Al Ali</option>
				<option value="dr-deepudev">Dr. Deepudev Sahadevan</option>
				<option value="dr-mostafa">Dr. Mostafa Kamil</option>
				<option value="dr-blessy">Dr. Blessy Trencia Lincy</option>
				<option value="dr-muner">Dr. Muner Mustafa Abou Hasan</option>
				<option value="dr-zaytoon">Dr. Mohammad Abu Zaytoon</option>
				<option value="dr-rfaat">Dr. Rfaat Soliby</option>
				<option value="dr-zainab">Dr. Zainab Rasheed</option>
				<option value="dr-rukshanda">Dr. Rukshanda Kamran</option>
				<option value="prof-alireza">Prof. Alireza Daneshkhah</option>
				<option value="mawada-nasser">Mawada Nasser</option>
				<option value="riham-arab">Riham Arab</option>
				<option value="dr-thomas">Dr. Thomas Mgonja</option>
				<option value="dr-yacob">Dr. Yacob TesFamariam Tesfaldet</option>
				<option value="dr-mahmoud">Dr. Mahmoud Alkhouli</option>
				<option value="dr-theo">Dr. Mojtaba Theo Ammari</option>
				<option value="dr-seyed">Dr. Seyed Mousavi</option>
			</select>
		</div>
        <button class="submit-btn" id="completed-search">Search</button>
    </div>
    
    <div class="projects-grid">
        {% for project in completed_projects %}
        <article class="project-card animate__animated animate__fadeInUp">
            <span class="project-domain">{{ project.domain }}</span>
            <h3 class="project-title">{{ project.project_title }}</h3>
            <p class="project-abstract">{{ project.abstract }}</p>
            <div class="project-meta">
                <div class="project-meta-item">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 4a4 4 0 014 4 4 4 0 01-4 4 4 4 0 01-4-4 4 4 0 014-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4z"/>
                    </svg>
                    <span>Lead: {{ project.lead_researcher }}</span>
                </div>
                <div class="project-meta-item">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"/>
                    </svg>
                    <span>Supervisor: {{ project.supervisor }}</span>
                </div>
                <div class="project-meta-item">
                    <svg viewBox="0 0 24 24">
                        <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/>
                    </svg>
                    <span>Completed: {{ project.completion_date }}</span>
                </div>
            </div>
            <div class="project-links">
                {% if project.poster_path %}
                <a href="{{ url_for('download_completed_file', path=project.poster_path) }}" class="project-link">
                    <svg viewBox="0 0 24 24">
                        <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM12 7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm-1 3.5h-1v-1h1v1zm1.5 0h-1v-1h1v1zm1.5 0h-1v-1h1v1z"/>
                    </svg>
                    Poster
                </a>
                {% endif %}
                {% if project.video_path %}
                <a href="{{ url_for('download_completed_file', path=project.video_path) }}" class="project-link">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                    </svg>
                    Demo Video
                </a>
                {% endif %}
                {% if project.report_path %}
                <a href="{{ url_for('download_completed_file', path=project.report_path) }}" class="project-link">
                    <svg viewBox="0 0 24 24">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM8 15c0-1.66 1.34-3 3-3 .35 0 .69.07 1 .18V6h5v2h-3v7.03c-.02 1.64-1.35 2.97-3 2.97-1.66 0-3-1.34-3-3z"/>
                    </svg>
                    Final Report
                </a>
                {% endif %}
            </div>
        </article>
        {% endfor %}
    </div>
</div>
        <!-- Submit Project Tab -->
        
		
		<div class="tab-content" id="submit">
			{% if not logged_in %}
				<div class="submission-form">
					<div class="form-section">
						<p>Please <a href="{{ url_for('login') }}">login</a> to submit a project proposal.</p>
					</div>
				</div>
			{% else %}
				
			

		
            <div class="submission-form animate__animated animate__fadeIn">
                <div class="form-header">
                    <h2>Submit Your Project Proposal</h2>
                    {% if 'username' in session %}
                        <div class="user-info">
                            Welcome, {{ session['username'] }}! 
                            <a href="{{ url_for('logout') }}">Logout</a>
                        </div>
                    {% endif %}
                </div>
                
                <a href="/static/IRADA_Project_Proposal_Template.docx" download class="download-btn">
                    <svg viewBox="0 0 24 24">
                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                    </svg>
                    Download Proposal Form
                </a>

                <form method="POST" action="{{ url_for('submit_proposal') }}" enctype="multipart/form-data">
                    <div class="form-section">
					<div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="name">Your Name</label>
                            <input type="text" class="form-control" name="name" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="email">Email</label>
                            <input type="email" class="form-control" name="email" required>
                        </div>
                    </div> </div> 
					
                    <div class="form-section">
                    <div class="form-group">
                        <label class="form-label" for="project_title">Project Title</label>
                        <input type="text" class="form-control" name="project_title" required>
                    </div> </div> 
					
					<div class="form-section">
					<div class="form-group">
						<label class="form-label" for="project_brief">Project Brief (max 40 words)</label>
						<textarea class="form-control" name="project_brief" maxlength="300" 
								  placeholder="Briefly describe your project in 40 words or less" required></textarea>
						
					</div>
				</div>
                    <div class="form-section">
                    <div class="form-group">
                        <label class="form-label" for="team_count">Number of Team Members</label>
                        <select class="form-control" id="team_count" name="team_count" onchange="updateTeamMembers()" required>
                            {% for i in range(1, 11) %}
                                <option value="{{ i }}">{{ i }}</option>
                            {% endfor %}
                        </select>
                        <div id="team_members"></div>
                    </div> </div>
					
					

					<div class="form-section">
					<div class="form-group">
						<label class="form-label" for="domain">Project Domain</label>
						<select class="form-control" name="domain" required>
							<option value="">Select Domain</option>
							<option value="AI & Machine Learning">AI & Machine Learning</option>
							<option value="Robotics & Automation">Robotics & Automation</option>
							<option value="Data Science">Data Science</option>
							<option value="Aviation Innovation">Aviation Innovation</option>
						</select>
					</div> </div>
					<div class="form-section">
					<div class="form-group">
						<label class="form-label" for="timeline">Project Timeline</label>
						<select class="form-control" name="timeline" required>
							<option value="">Select Timeline</option>
							<option value="Short-term (0-3 months)">Short-term (0-3 months)</option>
							<option value="Medium-term (3-6 months)">Medium-term (3-6 months)</option>
							<option value="Long-term (6+ months)">Long-term (6+ months)</option>
						</select>
					</div> </div>
					<div class="form-section">
					<div class="form-row">
					<div class="form-group">
						<label class="form-label" for="start_date">Project Start Date</label>
						<input type="date" class="form-control" name="start_date" required>
					</div> </div>
					
				  </div>

					
					
					
					<!-- Faculty Dropdown -->
<div class="form-section">
    <div class="form-group">
        <label class="form-label" for="faculty">Faculty</label>
        <select class="form-control" name="faculty" id="faculty" required onchange="updateProgrammeOptions()">
            <option value="">Select Faculty</option>
            <option value="Faculty of Business Management">Faculty of Business Management</option>
            <option value="Faculty of Engineering">Faculty of Engineering</option>
            <option value="Faculty of Mathematics and Data Science">Faculty of Mathematics and Data Science</option>
            <option value="Institute of Applied Research & Technology">Institute of Applied Research & Technology</option>
            <option value="Professional Training">Professional Training</option>
            <option value="The Postgraduate Centre">The Postgraduate Centre</option>
            <option value="Other">Other (Please specify)</option>
        </select>
    </div>
    <div id="otherFacultyContainer" style="display: none; margin-top: 10px;">
        <input type="text" class="form-control" id="otherFacultyInput" name="other_faculty" placeholder="Please specify your faculty">
    </div>
</div>

<!-- Programme Dropdown -->
<div class="form-section">
    <div class="form-group">
        <label class="form-label" for="programme">Programme</label>
        <select class="form-control" name="programme" id="programme" onchange="checkOtherProgramme()">
            <option value="">Select Faculty first</option>
            <!-- Options will be populated by JavaScript -->
            <option value="Other">Other (Please specify)</option>
        </select>
    </div>
    <div id="otherProgrammeContainer" style="display: none; margin-top: 10px;">
        <input type="text" class="form-control" id="otherProgrammeInput" name="other_programme" placeholder="Please specify your programme">
    </div>
</div>
					

<div class="form-section">
    
    
    <label class="checkbox-label">
        <input type="checkbox" id="needsMentorship" name="needs_mentorship" value="yes">
        Do you need mentorship/guidance?
    </label>
    
    <div id="supervisorContainer" style="display: none;">
        <label class="form-label" for="supervisor">Supervisor</label>
        <select class="form-control" name="supervisor" >
            <option value="">Select Supervisor</option>
            
			
			 <option value="">All Supervisors</option>
			<option value="prof-hannah">Prof. Hannah Al Ali</option>
			<option value="dr-deepudev">Dr. Deepudev Sahadevan</option>
			<option value="dr-mostafa">Dr. Mostafa Kamil</option>
			<option value="dr-blessy">Dr. Blessy Trencia Lincy</option>
			<option value="dr-muner">Dr. Muner Mustafa Abou Hasan</option>
			<option value="dr-zaytoon">Dr. Mohammad Abu Zaytoon</option>
			<option value="dr-rfaat">Dr. Rfaat Soliby</option>
			<option value="dr-zainab">Dr. Zainab Rasheed</option>
			<option value="dr-rukshanda">Dr. Rukshanda Kamran</option>
			<option value="prof-alireza">Prof. Alireza Daneshkhah</option>
			<option value="mawada-nasser">Mawada Nasser</option>
			<option value="riham-arab">Riham Arab</option>
			<option value="dr-thomas">Dr. Thomas Mgonja</option>
			<option value="dr-yacob">Dr. Yacob TesFamariam Tesfaldet</option>
			<option value="dr-mahmoud">Dr. Mahmoud Alkhouli</option>
			<option value="dr-theo">Dr. Mojtaba Theo Ammari</option>
			<option value="dr-seyed">Dr. Seyed Mousavi</option>

           
        </select>
    </div>
</div>


  
    
    


<div class="form-section">
    <h3 class="form-section-title">Resources Required</h3>
    
    <div class="resources-grid">
        <label class="resource-option">
            <input type="checkbox" name="resources" value="PC"> PC
        </label>
        <label class="resource-option">
            <input type="checkbox" name="resources" value="High Performance PC + GPU"> High Performance PC + GPU
        </label>
        <label class="resource-option">
            <input type="checkbox" name="resources" value="Simulation Tool"> Simulation Tool
        </label>
        <label class="resource-option">
            <input type="checkbox" name="resources" value="Pepper"> Pepper
        </label>
        <label class="resource-option">
            <input type="checkbox" name="resources" value="Nao"> Nao
        </label>
        <label class="resource-option">
            <input type="checkbox" name="resources" value="Other"> Other
        </label>
    </div>
    
    <div id="otherResourceContainer" style="display: none;">
        <input type="text" class="form-control" name="other_resource" placeholder="Please specify other resource">
    </div>
</div>

<div class="form-section">
    <h3 class="form-section-title">Project Proposal</h3>
    
    <div class="file-upload">
        <label class="form-label">Upload Proposal (PDF/DOC/DOCX)</label>
        <input type="file" class="form-control" name="file" accept=".pdf,.doc,.docx" required>
    </div>
</div>
					
			
                    
                    <button type="submit" class="submit-btn">Submit Proposal</button>
                </form>		

					
    <!-- Other resource input will be inserted here by JavaScript when needed -->
		</div>

                 {% endif %}
		
            </div>

		
		<!-- Track Project Tab -->
		<div class="tab-content" id="track">
			<div class="track-project animate__animated animate__fadeIn">
				<h2>Track Your Project Status</h2>
				<p>Enter your project ID or title to check the current status of your submission.</p>
				
				<div class="status-message" id="statusMessage"></div>
				
				<form class="track-form" id="trackForm">
					<div class="form-group">
						<label class="form-label" for="tracking_id">Project ID</label>
						<input type="text" class="form-control" id="tracking_id" name="tracking_id" placeholder="Enter your project ID">
					</div>
					<div class="form-group">
						<label class="form-label" for="tracking_email">Your Email</label>
						<input type="email" class="form-control" id="tracking_email" name="tracking_email" placeholder="Enter your registered email">
					</div>
					<button type="submit" class="submit-btn">Check Status</button>
				</form>
				
				<div id="projectStatus" style="display: none; margin-top: 30px;">
					<h3>Project Status</h3>
					<div class="project-meta">
						<div class="project-meta-item">
							<svg viewBox="0 0 24 24">
								<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"/>
							</svg>
							<span id="statusText">Status: Pending</span>
						</div>
						<div class="project-meta-item">
							<svg viewBox="0 0 24 24">
								<path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/>
							</svg>
							<span id="submissionDate">Submitted on: 2024-03-15</span>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<!-- My Proposals Tab -->
		


<div class="tab-content" id="my-proposals">
    {% if not logged_in %}
        <div class="submission-form">
            <div class="form-section">
                <p>Please <a href="{{ url_for('login') }}">login</a> to view your project proposals.</p>
            </div>
        </div>
    {% else %}
        


    {% if 'username' not in session %}
        <div class="submission-form">
            <div class="form-section">
                <p>Please <a href="{{ url_for('login') }}">login</a> to view your project proposals.</p>
            </div>
        </div>
    {% else %}
        <div class="submission-form animate__animated animate__fadeIn">
		<div class="form-header">
                    <h2>My Project Proposals</h2>
                    {% if 'username' in session %}
                        <div class="user-info">
                            Welcome, {{ session['username'] }}! 
                            <a href="{{ url_for('logout') }}">Logout</a>
                        </div>
                    {% endif %}
                </div>
           
            
            {% if proposals %}
                <div class="proposals-table-container">
                    <table class="proposals-table">
                        <thead>
                            <tr>
                               
                                <th>Project Title</th>
                                <th>Team Members</th>
                                <th>Domain</th>
                                <th>Supervisor</th>
                                <th>Timeline</th>
                                
                                <th>Submission Date</th>
								<th>Status</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                            {% for proposal in proposals %}
                                <tr>
                                    
                                    <td>{{ proposal.project_title }}</td>
                                    <td>{{ proposal.team_members }}</td>
                                    <td>{{ proposal.domain }}</td>
                                    <td>{{ proposal.supervisor or 'N/A' }}</td>
                                    <td>{{ proposal.timeline }}</td>
                                    
                                    <td>{{ proposal.submission_date.strftime('%Y-%m-%d') }}</td>
									<td>
                                        {% if proposal.status == 'Accepted' %}
                                            <span class="status-badge status-accepted">Accepted</span>
                                        {% elif proposal.status == 'Rejected' %}
                                            <span class="status-badge status-rejected">Rejected</span>
                                        {% else %}
                                            <span class="status-badge status-pending">Pending</span>
                                        {% endif %}
                                    </td>
                                    
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="form-section">
                    <p>You haven't submitted any project proposals yet.</p>
                </div>
            {% endif %}
        </div>
    {% endif %}
	{% endif %}
</div>

		
    </main>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script>
    // Tab functionality
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');
    
    tabBtns.forEach(btn => {
    btn.addEventListener('click', () => {
        const tabId = btn.getAttribute('data-tab');
        
        // Skip processing for login-required tabs (handled by onclick)
        if (tabId === 'login-required') return;
        
        // Remove active class from all buttons and contents
        tabBtns.forEach(b => b.classList.remove('active'));
        tabContents.forEach(c => c.classList.remove('active'));
        
        // Add active class to clicked button
        btn.classList.add('active');
        
        // Show corresponding content
        document.getElementById(tabId).classList.add('active');
    });
});

    // Filter functionality
    document.querySelectorAll('.filter-select').forEach(select => {
        select.addEventListener('change', function() {
            const tab = this.closest('.tab-content').id;
            const domainFilter = document.querySelector(`#${tab} select:nth-of-type(1)`).value.toLowerCase();
            const timelineFilter = document.querySelector(`#${tab} select:nth-of-type(2)`).value.toLowerCase();
            const supervisorFilter = document.querySelector(`#${tab} select:nth-of-type(3)`).value.toLowerCase();
            
            document.querySelectorAll(`#${tab} .project-card`).forEach(card => {
                const domain = card.querySelector('.project-domain').textContent.toLowerCase();
                const timeline = card.querySelector('.project-meta-item:last-child span').textContent.toLowerCase();
                const supervisor = card.querySelector('.project-meta-item:nth-of-type(2) span').textContent.toLowerCase();
                
                const domainMatch = !domainFilter || domain.includes(domainFilter);
                const timelineMatch = !timelineFilter || timeline.includes(timelineFilter);
                const supervisorMatch = !supervisorFilter || supervisor.includes(supervisorFilter);
                
                if (domainMatch && timelineMatch && supervisorMatch) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });
    });
	
// Filter functionality for both tabs
	
function setupFilters(tabId) {
    const searchBtn = document.getElementById(`${tabId}-search`);
    if (!searchBtn) return;

    searchBtn.addEventListener('click', function() {
        const domainValue = document.getElementById(`${tabId}-domain`).value.toLowerCase();
        const yearValue = document.getElementById(`${tabId}-year`).value;
        const supervisorValue = document.getElementById(`${tabId}-supervisor`).value.toLowerCase();

        document.querySelectorAll(`#${tabId} .project-card`).forEach(card => {
            const domain = card.querySelector('.project-domain').textContent.toLowerCase();
            const dateText = card.querySelector('.project-meta-item:last-child span').textContent;
            const year = new Date(dateText.split(': ')[1]).getFullYear();
            const supervisorText = card.querySelector('.project-meta-item:nth-of-type(2) span').textContent.toLowerCase();

            const domainMatch = !domainValue || domain.includes(domainValue);
            const yearMatch = !yearValue || year.toString() === yearValue;
            
            // Supervisor matching
			let supervisorMatch = true;
			if (supervisorValue) {
				const supervisorMap = {
					'prof-hannah': 'hannah al ali',
					'dr-deepudev': 'deepudev sahadevan',
					'dr-mostafa': 'mostafa kamil',
					'dr-blessy': 'blessy trencia lincy',
					'dr-muner': 'muner mustafa abou hasan',
					'dr-zaytoon': 'mohammad abu zaytoon',
					'dr-rfaat': 'rfaat soliby',
					'dr-zainab': 'zainab rasheed',
					'dr-rukshanda': 'rukshanda kamran',
					'prof-alireza': 'alireza daneshkhah',
					'mawada-nasser': 'mawada nasser',
					'riham-arab': 'riham arab',
					'dr-thomas': 'thomas mgonja',
					'dr-yacob': 'yacob tesfamariam tesfaldet',
					'dr-mahmoud': 'mahmoud alkhouli',
					'dr-theo': 'mojtaba theo ammari',
					'dr-seyed': 'seyed mousavi'
				};
				const expectedKey = supervisorMap[supervisorValue];
				supervisorMatch = supervisorText.toLowerCase().includes(expectedKey);
			}

            if (domainMatch && yearMatch && supervisorMatch) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    });
}

//filter functionality for ongoing projects

function setupOngoingFilters() {
    const searchBtn = document.getElementById('ongoing-search');
    if (!searchBtn) return;

    searchBtn.addEventListener('click', function() {
        const domainValue = document.getElementById('ongoing-domain').value.toLowerCase();
        const timelineValue = document.getElementById('ongoing-timeline').value.toLowerCase();
        const supervisorValue = document.getElementById('ongoing-supervisor').value.toLowerCase();

        document.querySelectorAll('#ongoing .project-card').forEach(card => {
            const domain = card.querySelector('.project-domain').textContent.toLowerCase();
            const timeline = card.querySelector('.project-meta-item:last-child span').textContent.toLowerCase();
            const supervisorText = card.querySelector('.project-meta-item:nth-of-type(2) span').textContent.toLowerCase();

            const domainMatch = !domainValue || domain.includes(domainValue);
            const timelineMatch = !timelineValue || timeline.includes(timelineValue);
            
            // Supervisor matching
            let supervisorMatch = true;
            if (supervisorValue) {
                const supervisorMap = {
                    'prof-hannah': 'hannah al ali',
                    'dr-deepudev': 'deepudev sahadevan',
                    'dr-mostafa': 'mostafa kamil',
                    'dr-blessy': 'blessy trencia lincy',
                    'dr-muner': 'muner mustafa abou hasan',
                    'dr-zaytoon': 'mohammad abu zaytoon',
                    'dr-rfaat': 'rfaat soliby',
                    'dr-zainab': 'zainab rasheed',
                    'dr-rukshanda': 'rukshanda kamran',
                    'prof-alireza': 'alireza daneshkhah',
                    'mawada-nasser': 'mawada nasser',
                    'riham-arab': 'riham arab',
                    'dr-thomas': 'thomas mgonja',
                    'dr-yacob': 'yacob tesfamariam tesfaldet',
                    'dr-mahmoud': 'mahmoud alkhouli',
                    'dr-theo': 'mojtaba theo ammari',
                    'dr-seyed': 'seyed mousavi'
                };
                const expectedKey = supervisorMap[supervisorValue];
                
                // Check if supervisor text contains the expected name
                supervisorMatch = expectedKey && supervisorText.includes(expectedKey.toLowerCase());
            }

            if (domainMatch && timelineMatch && supervisorMatch) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    });
}

// Initialize filters when DOM loads
document.addEventListener('DOMContentLoaded', function() {
    setupOngoingFilters();
    setupCompletedFilters();
    updateTeamMembers();
});

// filter functionality for completed projects
function setupCompletedFilters() {
    const searchBtn = document.getElementById('completed-search');
    if (!searchBtn) return;

    searchBtn.addEventListener('click', function() {
        const domainValue = document.getElementById('completed-domain').value.toLowerCase();
        const yearValue = document.getElementById('completed-year').value;
        const supervisorValue = document.getElementById('completed-supervisor').value.toLowerCase();

        document.querySelectorAll('#completed .project-card').forEach(card => {
            const domain = card.querySelector('.project-domain').textContent.toLowerCase();
            const dateText = card.querySelector('.project-meta-item:last-child span').textContent;
            const supervisorText = card.querySelector('.project-meta-item:nth-of-type(2) span').textContent.toLowerCase();

            // Domain matching
            const domainMatch = !domainValue || domain.includes(domainValue);
            
            // Year matching
            let yearMatch = true;
            if (yearValue) {
                yearMatch = dateText.includes(yearValue);
            }
            
        
            // Supervisor matching
			let supervisorMatch = true;
			if (supervisorValue) {
				const supervisorMap = {
					'prof-hannah': 'hannah al ali',
					'dr-deepudev': 'deepudev sahadevan',
					'dr-mostafa': 'mostafa kamil',
					'dr-blessy': 'blessy trencia lincy',
					'dr-muner': 'muner mustafa abou hasan',
					'dr-zaytoon': 'mohammad abu zaytoon',
					'dr-rfaat': 'rfaat soliby',
					'dr-zainab': 'zainab rasheed',
					'dr-rukshanda': 'rukshanda kamran',
					'prof-alireza': 'alireza daneshkhah',
					'mawada-nasser': 'mawada nasser',
					'riham-arab': 'riham arab',
					'dr-thomas': 'thomas mgonja',
					'dr-yacob': 'yacob tesfamariam tesfaldet',
					'dr-mahmoud': 'mahmoud alkhouli',
					'dr-theo': 'mojtaba theo ammari',
					'dr-seyed': 'seyed mousavi'
				};
				const expectedKey = supervisorMap[supervisorValue];
				supervisorMatch = supervisorText.toLowerCase().includes(expectedKey);
			}

            if (domainMatch && yearMatch && supervisorMatch) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    });
}

// Initialize filters when DOM loads
document.addEventListener('DOMContentLoaded', function() {
    setupFilters('ongoing');
    setupCompletedFilters();
    updateTeamMembers();
});

// Initialize filters when DOM loads
document.addEventListener('DOMContentLoaded', function() {
    setupFilters('ongoing');
    setupFilters('completed');
    updateTeamMembers();
    
    // Check for submission status messages
    const urlParams = new URLSearchParams(window.location.search);
    const submissionStatus = urlParams.get('submission');
    
    if (submissionStatus === 'success') {
        const statusMessage = document.createElement('div');
        statusMessage.className = 'status-message success';
        statusMessage.textContent = 'Project submitted successfully!';
        document.querySelector('.submission-form').prepend(statusMessage);
    } else if (submissionStatus === 'error') {
        const statusMessage = document.createElement('div');
        statusMessage.className = 'status-message error';
        statusMessage.textContent = 'Project submission failed. Please try again.';
        document.querySelector('.submission-form').prepend(statusMessage);
    }
});
// Initialize filters for both tabs
setupFilters('ongoing');
setupFilters('completed');
    // Team members functionality
    function updateTeamMembers() {
        let numMembers = document.getElementById("team_count").value;
        let membersDiv = document.getElementById("team_members");
        membersDiv.innerHTML = ""; // Clear previous fields
        
        for (let i = 1; i <= numMembers; i++) {
            let input = document.createElement("input");
            input.type = "text";
            input.className = "form-control";
            input.name = "team_member";
            input.placeholder = "Team Member " + i + " Name";
            input.required = true;
            membersDiv.appendChild(input);
            membersDiv.appendChild(document.createElement("br"));
        }
    }
	
	
async function loadOngoingProjects() {
    try {
        const response = await fetch('/get_ongoing_projects');
        const projects = await response.json();
        
        const projectsGrid = document.querySelector('#ongoing .projects-grid');
        projectsGrid.innerHTML = '';
        
        projects.forEach((project, index) => {
            const projectCard = document.createElement('article');
            projectCard.className = `project-card animate__animated animate__fadeInUp`;
            if (index > 0) {
                projectCard.style.animationDelay = `${index * 0.1}s`;
            }
            
            projectCard.innerHTML = `
                <span class="project-domain">${project.domain}</span>
                <h3 class="project-title">${project.project_title}</h3>
                <p class="project-abstract">${project.abstract}</p>
                <div class="project-meta">
                    <div class="project-meta-item">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 4a4 4 0 014 4 4 4 0 01-4 4 4 4 0 01-4-4 4 4 0 014-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4z"/>
                        </svg>
                        <span>Researcher: ${project.researcher}</span>
                    </div>
                    <div class="project-meta-item">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"/>
                        </svg>
                        <span>Supervisor: ${project.supervisor}</span>
                    </div>
                    <div class="project-meta-item">
                        <svg viewBox="0 0 24 24">
                            <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/>
                        </svg>
                        <span>${project.timeline}</span>
                    </div>
                </div>
            `;
            
            projectsGrid.appendChild(projectCard);
        });
    } catch (error) {
        console.error('Error loading ongoing projects:', error);
    }
}

// Call this when the ongoing tab is clicked
document.querySelector('[data-tab="ongoing"]').addEventListener('click', loadOngoingProjects);
	
	
	
	
	async function loadCompletedProjects() {
    try {
        const response = await fetch('/get_completed_projects');
        const projects = await response.json();
        
        const projectsGrid = document.querySelector('#completed .projects-grid');
        projectsGrid.innerHTML = '';
        
        projects.forEach(project => {
            // Format completion date as "Month Year"
            const completionDate = new Date(project.completion_date);
            const formattedDate = completionDate.toLocaleString('default', { month: 'long', year: 'numeric' });
            
            const projectCard = document.createElement('article');
            projectCard.className = 'project-card animate__animated animate__fadeInUp';
            
            projectCard.innerHTML = `
                <span class="project-domain">${project.domain}</span>
                <h3 class="project-title">${project.project_title}</h3>
                <p class="project-abstract">${project.abstract}</p>
                <div class="project-meta">
                    <div class="project-meta-item">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 4a4 4 0 014 4 4 4 0 01-4 4 4 4 0 01-4-4 4 4 0 014-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4z"/>
                        </svg>
                        <span>Lead: ${project.lead_researcher}</span>
                    </div>
                    <div class="project-meta-item">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"/>
                        </svg>
                        <span>Supervisor: ${project.supervisor}</span>
                    </div>
                    <div class="project-meta-item">
                        <svg viewBox="0 0 24 24">
                            <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/>
                        </svg>
                        <span>Completed: ${formattedDate}</span>
                    </div>
                </div>
                <div class="project-links">
                    ${project.poster_path ? `
                    <a href="/download_file?path=${encodeURIComponent(project.poster_path)}" class="project-link">
                        <svg viewBox="0 0 24 24">
                            <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM12 7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm-1 3.5h-1v-1h1v1zm1.5 0h-1v-1h1v1zm1.5 0h-1v-1h1v1z"/>
                        </svg>
                        Poster
                    </a>` : ''}
                    ${project.video_path ? `
                    <a href="/download_file?path=${encodeURIComponent(project.video_path)}" class="project-link">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                        </svg>
                        Demo Video
                    </a>` : ''}
                    ${project.report_path ? `
                    <a href="/download_file?path=${encodeURIComponent(project.report_path)}" class="project-link">
                        <svg viewBox="0 0 24 24">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM8 15c0-1.66 1.34-3 3-3 .35 0 .69.07 1 .18V6h5v2h-3v7.03c-.02 1.64-1.35 2.97-3 2.97-1.66 0-3-1.34-3-3z"/>
                        </svg>
                        Final Report
                    </a>` : ''}
                </div>
            `;
            
            projectsGrid.appendChild(projectCard);
        });

        // Initialize filters for the newly loaded projects
        setupFilters('completed');
    } catch (error) {
        console.error('Error loading completed projects:', error);
    }
}

	// Call this function when the completed tab is clicked
	document.querySelector('[data-tab="completed"]').addEventListener('click', loadCompletedProjects);


		// Track project functionality
		document.getElementById('trackForm').addEventListener('submit', async function(e) {
		e.preventDefault();
		const projectId = document.getElementById('tracking_id').value;
		const email = document.getElementById('tracking_email').value;
		const statusMessage = document.getElementById('statusMessage');
		const projectStatus = document.getElementById('projectStatus');

		statusMessage.textContent = 'Loading...';
		statusMessage.className = 'status-message';
		statusMessage.style.display = 'block';
		projectStatus.style.display = 'none';

		try {
			const response = await fetch(`/track_project?id=${projectId}&email=${email}`);
			const data = await response.json();

			if (data.success) {
				document.getElementById('statusText').textContent = `Status: ${data.status}`;
				document.getElementById('submissionDate').textContent = `Submitted on: ${data.submission_date}`;
				projectStatus.style.display = 'block';
				
				statusMessage.textContent = 'Project status retrieved successfully';
				statusMessage.className = 'status-message success';
			} else {
				statusMessage.textContent = data.message || 'Project not found';
				statusMessage.className = 'status-message error';
				projectStatus.style.display = 'none';
			}
		} catch (error) {
			statusMessage.textContent = 'Error connecting to server';
			statusMessage.className = 'status-message error';
			projectStatus.style.display = 'none';
		}
	});
		
    // Project links functionality
    document.querySelectorAll('.project-link').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const type = this.textContent.trim();
            const projectTitle = this.closest('.project-card').querySelector('.project-title').textContent;
            
            // Simulate download
            const blob = new Blob([`Sample ${type} for ${projectTitle}`], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${projectTitle.replace(/\s+/g, '_')}_${type}.${type === 'Poster' ? 'png' : type === 'Demo Video' ? 'mp4' : 'pdf'}`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        });
    });

    // Initialize team members on page load if needed
    document.addEventListener('DOMContentLoaded', function() {
        updateTeamMembers();
        
        // Check for success/error messages in URL
        const urlParams = new URLSearchParams(window.location.search);
        const submissionStatus = urlParams.get('submission');
        
        if (submissionStatus === 'success') {
            const statusMessage = document.createElement('div');
            statusMessage.className = 'status-message success';
            statusMessage.textContent = 'Project submitted successfully!';
            document.querySelector('.submission-form').prepend(statusMessage);
        } else if (submissionStatus === 'error') {
            const statusMessage = document.createElement('div');
            statusMessage.className = 'status-message error';
            statusMessage.textContent = 'Project submission failed. Please try again.';
            document.querySelector('.submission-form').prepend(statusMessage);
        }
    });
	document.getElementById('needsMentorship').addEventListener('change', function() {
    const supervisorContainer = document.getElementById('supervisorContainer');
    if (this.checked) {
        // Create new container after the checkbox if it doesn't exist
        if (!supervisorContainer) {
            const container = document.createElement('div');
            container.id = 'supervisorContainer';
            container.innerHTML = `
                <label class="form-label" for="supervisor">Supervisor</label>
                <select class="form-control" name="supervisor" required>
                    <option value="">Select Supervisor</option>
                   
					
					<option value="Prof. Hannah Al Ali">Prof. Hannah Al Ali</option>
					<option value="Dr. Deepudev Sahadevan">Dr. Deepudev Sahadevan</option>
					<option value="Dr. Mostafa Kamil">Dr. Mostafa Kamil</option>
					<option value="Dr. Blessy Trencia Lincy">Dr. Blessy Trencia Lincy</option>
					<option value="Dr. Muner Mustafa Abou Hasan">Dr. Muner Mustafa Abou Hasan</option>
					<option value="Dr. Mohammad Abu Zaytoon">Dr. Mohammad Abu Zaytoon</option>
					<option value="Dr. Rfaat Soliby">Dr. Rfaat Soliby</option>
					<option value="Dr. Zainab Rasheed">Dr. Zainab Rasheed</option>
					<option value="Dr. Rukshanda Kamran">Dr. Rukshanda Kamran</option>
					<option value="Prof. Alireza Daneshkhah">Prof. Alireza Daneshkhah</option>
					<option value="Mawada Nasser">Mawada Nasser</option>
					<option value="Riham Arab">Riham Arab</option>
					<option value="Dr. Thomas Mgonja">Dr. Thomas Mgonja</option>
					<option value="Dr. Yacob TesFamariam Tesfaldet">Dr. Yacob TesFamariam Tesfaldet</option>
					<option value="Dr. Mahmoud Alkhouli">Dr. Mahmoud Alkhouli</option>
					<option value="Dr. Mojtaba Theo Ammari">Dr. Mojtaba Theo Ammari</option>
					<option value="Dr. Seyed Mousavi">Dr. Seyed Mousavi</option>

                    
                </select>
            `;
            this.parentNode.parentNode.insertBefore(container, this.parentNode.nextSibling);
        } else {
            supervisorContainer.style.display = 'block';
        }
    } else {
        if (supervisorContainer) {
            supervisorContainer.style.display = 'none';
        }
    }
});
document.querySelectorAll('input[name="resources"]').forEach(checkbox => {
    checkbox.addEventListener('change', function() {
        const otherContainer = document.getElementById('otherResourceContainer');
        if (this.value === 'Other' && this.checked) {
            otherContainer.style.display = 'block';
        } else if (this.value === 'Other' && !this.checked) {
            otherContainer.style.display = 'none';
            otherContainer.querySelector('input').value = '';
        }
    });
});


async function loadUserProposals() {
    try {
        const response = await fetch('/user/dashboard');
        const data = await response.json();
        
        const proposalsTable = document.querySelector('#my-proposals .proposals-table tbody');
        if (proposalsTable) {
            proposalsTable.innerHTML = '';
            
            if (data.proposals && data.proposals.length > 0) {
                data.proposals.forEach(proposal => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        
                        <td>${proposal.project_title}</td>
                        <td>${proposal.team_members || 'N/A'}</td>
                        <td>${proposal.domain || 'N/A'}</td>
                        <td>${proposal.supervisor || 'N/A'}</td>
                        <td>${proposal.timeline || 'N/A'}</td>
                        <td>
                            <span class="status-badge ${getStatusClass(proposal.status)}">
                                ${proposal.status || 'Pending'}
                            </span>
                        </td>
                        <td>${new Date(proposal.submission_date).toLocaleDateString()}</td>
                        <td>
                            <button class="view-btn" onclick="viewProposalDetails(${proposal.id})">
                                View Details
                            </button>
                            ${proposal.status === 'Pending' ? 
                                `<button class="edit-btn" onclick="editProposal(${proposal.id})">
                                    Edit
                                </button>` : ''}
                        </td>
                    `;
                    proposalsTable.appendChild(row);
                });
            } else {
                proposalsTable.innerHTML = `
                    <tr>
                        <td colspan="9" style="text-align: center; padding: 30px;">
                            You haven't submitted any proposals yet.
                        </td>
                    </tr>
                `;
            }
        }
    } catch (error) {
        console.error('Error loading user proposals:', error);
    }
}

function getStatusClass(status) {
    switch(status) {
        case 'Accepted': return 'status-accepted';
        case 'Rejected': return 'status-rejected';
        default: return 'status-pending';
    }
}

function viewProposalDetails(proposalId) {
    
     
    window.location.href = `/proposal_details/${proposalId}`;
}

function editProposal(proposalId) {
    // Implement edit functionality
    window.location.href = `/edit_proposal/${proposalId}`;
}

// Add event listener for the My Proposals tab
document.querySelector('[data-tab="my-proposals"]')?.addEventListener('click', loadUserProposals);

function showLoginAlert() {
    alert('Please login to submit the project proposal.');
    //  redirect to login page with return URL
    window.location.href = "{{ url_for('login') }}?next=" + encodeURIComponent(window.location.pathname);
}

</script>

<script>
// Function to update programme options based on selected faculty
function updateProgrammeOptions() {
    const facultySelect = document.getElementById('faculty');
    const programmeSelect = document.getElementById('programme');
    const otherFacultyContainer = document.getElementById('otherFacultyContainer');
    const otherFacultyInput = document.getElementById('otherFacultyInput');
    
    // Handle "Other" faculty selection
    if (facultySelect.value === 'Other') {
        otherFacultyContainer.style.display = 'block';
        otherFacultyInput.required = true;
    } else {
        otherFacultyContainer.style.display = 'none';
        otherFacultyInput.required = false;
    }
    
    // Clear existing options (except the "Other" option which we always want to keep)
    programmeSelect.innerHTML = '<option value="">Select Programme</option>';
    
    // Get the selected faculty
    const selectedFaculty = facultySelect.value;
    
    // Define programme options for each faculty
    const facultyProgrammes = {
        'Faculty of Business Management': [
            'Applied Bachelor in Air Transport Management',
            'Bachelor of Arts (Honours) in Applied Business - Top Up',
            'Bachelor of Arts (Honours) in Business Administration',
            'Bachelor of Arts (Honours) in Business with Accounting and Finance',
            'Bachelor of Arts (Honours) in Business with Human Resource Management',
            'Bachelor of Arts (Honours) in Business with Marketing',
            'Bachelor of Business Administration in Aviation Management',
            'Bachelor of Science (Honours) in Air Transport Management',
            'Bachelor of Science (Honours) in Air Transport Management - Top-Up',
            'Bachelor of Science (Honours) in Global Logistics and Supply Chain Management',
            'Bachelor of Science in Aviation Management',
            'Bachelor of Science in Logistics and Supply Chain Management',
            'BBA in Global Logistics and Supply Chain Management',
            'Extended Diploma in Aviation Operations',
            'Extended Diploma in Business',
            'Higher Diploma in Business Management',
            'Higher National Diploma in Business Management',
            'Higher National Diploma in International Travel & Tourism Management'
        ],
        'Faculty of Engineering': [
            'Applied Bachelor in Aerospace Engineering',
            'Applied Bachelor in Aircraft Maintenance Engineering',
            'Applied Bachelor in Avionics Engineering',
            'Applied Bachelor in Mechanical Engineering',
            'Bachelor of Engineering (Honours) in Aerospace Technology',
            'Bachelor of Engineering (Honours) in Aircraft Maintenance',
            'Bachelor of Engineering (Honours) in Aircraft Maintenance Studies',
            'Bachelor of Engineering (Honours) in Applied Mechanical Engineering',
            'Bachelor of Engineering (Hons) in Aerospace Technology',
            'Bachelor of Engineering (Hons) in Aerospace Technology - Top-Up',
            'Bachelor of Engineering (Hons) in Applied Mechanical Engineering',
            'Bachelor of Engineering (Hons) in Applied Mechanical Engineering - Top-Up',
            'Bachelor of Engineering (Hons) in Avionics Technology',
            'Bachelor of Engineering (Hons) in Avionics Technology - Top-Up',
            'Bachelor of Science in Aeronautical Engineering',
            'Extended Diploma in Aeronautical Engineering',
            'Higher Diploma in Aircraft Maintenance Engineering',
            'Practical Maintenance Experience Training',
            'Simulator Engineering Award'
        ],
        'Faculty of Mathematics and Data Science': [
            'Bachelor of Science in Artificial Intelligence',
            'Bachelor of Science in Computer Science',
            'Bachelor of Science in Data Science',
            'Bachelor of Science in Software Engineering',
            'BSc (Hons) in Computer Science with Artificial Intelligence',
            'BSc (Hons) in Data Science',
            'Simulator Engineering Award'
        ],
        'Institute of Applied Research & Technology': [
            'Doctor of Philosophy (PhD) in Aviation Management',
            'Doctor of Philosophy (PhD) in Data Science'
        ],
        'Professional Training': [
            'Diploma in Airport Ground Handling',
            'Dispatch Resource Management (DRM)',
            'Flight Dispatch - Abridged Course (FDAbC)',
            'Flight Dispatch (FDIC)',
            'Flight Dispatch Recurrent Course (FDRC)',
            'International Aviation Management Conference',
            'International Flight Planning (IFP)'
        ],
        'The Postgraduate Centre': [
            'Executive Leadership Programme in Civil Aviation',
            'Executive MBA in Aviation Management',
            'MA International Human Resource Management',
            'Master of Business Administration',
            'Master of Science in Data Science and Artificial Intelligence',
            'Master Of Science In Engineering Business Management',
            'Master Of Science In Mechanical Engineering',
            'MBA in Aviation Management',
            'MBA in General Management',
            'MBA in Logistics and Supply Chain Management',
            'MSc in Aerospace Engineering',
            'MSc in Aviation Safety',
            'MSc in Aviation Security',
            'Postgraduate Bridging Course',
            'Postgraduate Certificate in Aerospace Engineering',
            'Postgraduate Certificate in Airline and Airport Operation',
            'Postgraduate Certificate in Aviation Safety',
            'Postgraduate Certificate in Aviation Safety and Security',
            'Postgraduate Certificate in Business Management',
            'Postgraduate Certificate in Human Resources',
            'Postgraduate Certificate in Industrial Engineering',
            'Postgraduate Certificate in Logistics and Supply Chain Management',
            'Postgraduate Certificate in Mechanical Engineering'
        ]
    };
    
    // Add the appropriate options based on selected faculty
    if (selectedFaculty && facultyProgrammes[selectedFaculty]) {
        facultyProgrammes[selectedFaculty].forEach(programme => {
            const option = document.createElement('option');
            option.value = programme;
            option.textContent = programme;
            programmeSelect.appendChild(option);
        });
    }
    
    // Always add the "Other" option at the end
    const otherOption = document.createElement('option');
    otherOption.value = 'Other';
    otherOption.textContent = 'Other (Please specify)';
    programmeSelect.appendChild(otherOption);
    
    // Reset the "Other" programme input if faculty changes
    document.getElementById('otherProgrammeInput').value = '';
    document.getElementById('otherProgrammeContainer').style.display = 'none';
}

// Function to check if "Other" programme is selected
function checkOtherProgramme() {
    const programmeSelect = document.getElementById('programme');
    const otherProgrammeContainer = document.getElementById('otherProgrammeContainer');
    const otherProgrammeInput = document.getElementById('otherProgrammeInput');
    
    if (programmeSelect.value === 'Other') {
        otherProgrammeContainer.style.display = 'block';
        otherProgrammeInput.required = true;
    } else {
        otherProgrammeContainer.style.display = 'none';
        otherProgrammeInput.required = false;
    }
}

// Initialize the programme dropdown when the page loads
document.addEventListener('DOMContentLoaded', function() {
    updateProgrammeOptions();
    
    // Add event listener for faculty change
    document.getElementById('faculty').addEventListener('change', updateProgrammeOptions);
    
    // Add event listener for programme change
    document.getElementById('programme').addEventListener('change', checkOtherProgramme);
});

// Add this to your existing JavaScript
document.addEventListener('DOMContentLoaded', function() {
    const flashMessages = document.querySelectorAll('.flash-message');
    
    flashMessages.forEach(message => {
        // Remove element after animation completes
        message.addEventListener('animationend', function(e) {
            if (e.animationName === 'flashExit') {
                message.remove();
            }
        });
        
        // Optional: Allow manual dismissal
        message.addEventListener('click', () => {
            message.style.animation = 'flashExit 0.4s forwards';
        });
    });
}); 

// Function to get the final faculty value (either selected or other input)
function getFacultyValue() {
    const facultySelect = document.getElementById('faculty');
    if (facultySelect.value === 'Other') {
        return document.getElementById('otherFacultyInput').value;
    }
    return facultySelect.value;
}

// Function to get the final programme value (either selected or other input)
function getProgrammeValue() {
    const programmeSelect = document.getElementById('programme');
    if (programmeSelect.value === 'Other') {
        return document.getElementById('otherProgrammeInput').value;
    }
    return programmeSelect.value;
}
</script>
</body>
</html>